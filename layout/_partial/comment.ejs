<script>
  const getRealPath = pathname => {
    if(!pathname) {
      pathname = window.location.pathname
    }
    let names = pathname.split("/")
    for(let i = names.length - 1; i >= 0; --i) {
      let name = names[i].trim()
      if(name.length > 0 && name !== "/" && name !== "index.html") {
        return name
      }
    }
    return "/"
  }

  if( <%- theme.valine.enable %> ) {
    let path = getRealPath()
    console.log("The path of comment is ", path)
    new Valine({
      el: "#vcomments",
      appId: "<%- theme.valine.appid %>",
      appKey: "<%- theme.valine.appkey %>",
      notify: false,
      verify: false,
      avatar: "robohash",
      placeholder: "正确填写邮箱, 才能及时收到回复哦♪(^∇^*)",
      path
    });
  }
  
</script>